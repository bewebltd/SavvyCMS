function savvyDisableValidation(n){savvyDisableValidate=n}function BewebInitForm(n){if(typeof n!="object"||!n.tagName||n.tagName!="FORM")if(typeof n=="object"&&n.appendTo)n.length>0&&n[0].tagName&&n[0].tagName=="FORM"?n=n[0]:alert("Savvy Javascript Validation Error (Savvy.validate.js):\nForm parameter incorrect. JQuery object did not contain a form element.\n\nPlease correct the call to BewebInitForm(formID).");else if(typeof n=="string")if(n.charAt(0)=="#"&&$(n).length>0)n=$(n)[0];else if($("#"+n).length>0)n=$("#"+n)[0];else{alert("Savvy Javascript Validation Error (Savvy.validate.js):\nForm does not exist with ID ["+n+"].\n\nPlease either set the form ID in the <form> tag or change the ID in the call to BewebInitForm(formID).");return}else{alert("Savvy Javascript Validation Error (Savvy.validate.js):\nForm parameter must be a form element, jquery object, or form ID.\n\nPlease correct the call to BewebInitForm(formID).");return}if(!n.doneBewebInitForm){n.doneBewebInitForm=!0;try{document.form=n}catch(t){}if($("input.datetime,input.date",n).length>0&&($("input.datetime",n).datepicker||$("input.date",n).datepicker?BewebInitDatePickers():$("input[type=text].datetime,input[type=text].date").length>0&&alert("Savvy Javascript Validation Error (Savvy.validate.js):\nThis page contains Date input fields but jQuery.datepicker is not loaded. You need to include several js files and skin files.")),$("input[type=text].datetime,input[type=text].date,input[type=text].number,input[type=text].url",n).length>0&&(window.df_FmtNumber||alert("Savvy Javascript Validation Error (Savvy.validate.js):\nThis page contains Number or Date input fields but beweb-cma.js is not included.")),$("input.picture",n).length>0&&!handleSelectPicture){alert("Savvy Javascript Validation Error (Savvy.validate.js):\nThis page contains Picture Upload fields but forms.js is not included.");return}$(n).on("blur","input",function(){$(this).hasClass("svyMobileFileUpload")||this.type=="text"&&this.value&&($(this).hasClass("date")||$(this).hasClass("datetime")?CheckDateInput(this,!1):$(this).hasClass("time")&&window.CheckTimeEntryField?window.CheckTimeEntryField(this):$(this).hasClass("url")&&window.CheckURLField?window.CheckURLField(this):$(this).hasClass("number")&&window.df_FmtNumber&&(this.value=window.df_FmtNumber(this)))});$(n).on("change","input,select,textarea,radio",function(){return CheckBasicFieldValidation(this),ShowValidationFeedback(this.form),!0});$(n).bind("submit",function(n){return BewebValidateSubmitHandler(this,n)});$(".validation-feedback .validation",n).hide()}}function BewebValidateSubmitHandler(n,t){var i=!0;return savvyDisableValidate?!0:(CheckBasicFormValidation(n)||(t.preventDefault(),i=!1),window.ExtraValidation&&(window.ExtraValidation(n,window.savvyValidateInvalidArray)||(t.preventDefault(),i=!1)),window.CheckForm&&!window.CheckForm(n))?!1:i?SavvyBeforeFormSubmit(n):!1}function ShowRequiredStars(n,t){t==""&&(t='<img src="'+websiteBaseUrl+'images/red-star.png" class="redstar">');$(n).find(".required:visible").each(function(){$(this).after(t)})}function SavvyBeforeFormSubmit(n){return window.ExtraBeforeFormSubmit&&!ExtraBeforeFormSubmit()?!1:n.isSubmitting?!1:(n.isSubmitting=!0,!0)}function BewebApplyDatePicker(n){if(!$(n).hasClass("hasDatepicker")){var t=$(n).attr("earliestyear"),i=$(n).attr("latestyear");$(n).hasClass("date")?$(n).datepicker({dateFormat:"d M yy",duration:"",changeYear:"true",changeMonth:"true",yearRange:t+":"+i,showOn:"button",buttonImage:websiteBaseUrl+"images/ico-calendar.gif",buttonImageOnly:!0}):$(n).hasClass("datetime")&&$(n).datepicker({dateFormat:"d M yy",duration:"",changeYear:"true",changeMonth:"true",yearRange:t+":"+i,showOn:"button",buttonImage:websiteBaseUrl+"images/ico-calendar.gif",buttonImageOnly:!0,showTime:!0,constrainInput:!1,stepMinutes:1,stepHours:1,altTimeField:"",time24h:!1})}}function BewebInitDatePickers(){$("input.date:visible,input.datetime:visible").each(function(){this.type=="text"&&BewebApplyDatePicker(this)})}function BewebValidateInvalidHandler(n,t){var i,r;t?(i="There was a problem: "+t,$("div.validation-summary-errors").length>0&&($("div.validation-summary-errors").html(i),$("div.validation-summary-errors").show(500),r=$("div.validation-summary-errors").position().top,$("html").animate({scrollTop:r},"slow"),window.setTimeout('$("div.validation-summary-errors").hide("slow")',15e3))):$("div.validation-summary-errors").hide()}function CheckDateField(n,t){var r=n.form,i=n.id;return $("#"+i+"_day").length>0?CheckDateFields($("#"+i+"_day")[0],$("#"+i+"_month")[0],$("#"+i+"_year")[0],$("#"+i)[0],$("#"+i+"_hour")[0],$("#"+i+"_min")[0],t):CheckDateInput(n,t)}function CheckDateFields(n,t,i,r,u,f,e){var s,h;if(n&&n.selectedIndex<1||t.selectedIndex<1||i.selectedIndex<1||u&&(u.selectedIndex<0||f.selectedIndex<0))return r.value="",!0;s=1;n&&n.selectedIndex&&(s=n[n.selectedIndex].value);var c=t[t.selectedIndex].value,l=t.selectedIndex-1,a=i[i.selectedIndex].value,o=s+" "+c+" "+a;return(u&&(u.selectedIndex>0||f.selectedIndex>0)&&(o+=" "+u.options[u.selectedIndex].value,o+=":"+f.options[f.selectedIndex].value),h=new Date(o),h.getMonth()!=l)?(r.value="",e&&alert("This is not a valid date. Please select a new date."),n.focus(),!1):(r.value=o,!0)}function CheckDateInput(n,t){var e="",u=n.value,y=n.getAttribute("showTime")=="true",o=!1,i,h,f,r,w,b,k,s,p,c,l,a,v;if(n.type=="date"&&n.validity)return n.validity.valid;if(u!=""){i=new Date;switch(u.toLowerCase()){case"now":case"n":y&&(e="n");case"t":break;case"w":i.setDate(i.getDate()+1);break;case"y":i.setDate(i.getDate()-1);break;default:if(w=/^[0-9]{6}$/gi,b=w.exec(u),b!=null)h=u.substr(0,2),f=u.substr(2,2),r=u.substr(4,2);else if(k=/([^ \/\\.-]*)[ \/\\.-]([^ \/\\.-]*)[ \/\\.-]([^ \/\\.-]*)(.*)/gi,s=k.exec(u),s==null){o=!0;break}else h=s[1],f=s[2],r=s[3],e=s[4],e!=""&&(e=window.df_FmtTime?df_FmtTime(e):"");r=parseInt(r,10);r=r<=50?r+=2e3:r;r=r<100?r+=1900:r;isNaN(f)||(f=parseInt(f,10),f=ConvertJsMonth(f-1));u=h+" "+f+" "+r;i.setDate(u);y&&e!=""&&(u+=" "+e);i.setTime(Date.parse(u));o=isNaN(f)?f.substr(0,3).toLowerCase()!=ConvertJsMonth(i.getMonth()).toLowerCase():isNaN(h)?h.substr(0,3).toLowerCase()!=ConvertJsMonth(i.getMonth()).toLowerCase():parseInt(f)!=i.getMonth()+1}o||(o=isNaN(i));o||(r>2200||r<1756)&&(o=!0);o?(t&&alert("ERROR: This is not a recognised date format. Please correct the date before proceeding."),n.focus()):(p=i.getDate()+" "+ConvertJsMonth(i.getMonth())+" "+i.getFullYear(),y&&e!=""&&(c=i.getHours(),c<10&&(c="0"+c),l=i.getMinutes(),l<10&&(l="0"+l),p+=" "+c+":"+l),n.value=p,a=n.form["timefield_"+n.name],a&&a.value+""==""&&(v=a.getAttribute("data-default-time"),v&&v+""!=""&&(a.value=v)))}return!o}function ConvertJsMonth(n){var t="";switch(n){case 0:t="Jan";break;case 1:t="Feb";break;case 2:t="Mar";break;case 3:t="Apr";break;case 4:t="May";break;case 5:t="Jun";break;case 6:t="Jul";break;case 7:t="Aug";break;case 8:t="Sep";break;case 9:t="Oct";break;case 10:t="Nov";break;case 11:t="Dec"}return t}function formatTime(n){var i,t,r;return(r="",n.indexOf(":")>-1?(i=n.split(":")[0],t=n.split(":")[1],i=parseInt(i,10),t.indexOf("a")>-1&&(t=t.substring(0,t.indexOf("a"))),t.indexOf("p")>-1&&(t=t.substring(0,t.indexOf("p"))),t=parseInt(t,10)):(i=parseInt(n,10),t=0),isNaN(parseInt(i,10)))?"":isNaN(parseInt(t,10))?"":(n.indexOf("a")>-1?r="am":n.indexOf("p")>-1?r="pm":i>24?(i=12,r="am"):i>12?(i-=12,r="pm"):i==12?r="pm":i==0?(i=12,r="am"):r="am",t="0"+t,i="0"+i,i.substr(i.length-2,i.substr.length)+":"+t.substr(t.length-2,t.substr.length)+" "+r)}function ShowValidationMessage(n,t){var r,h,l,i,e,o,f,c,u,s;if((t=$(t),r=t[0].id,t.hasClass("svyPicBrowseFile")&&!t.is(":visible")&&(h=$(t).parents(".svyPictureContainer"),h.length>0&&(t=h)),t.hasClass("svyPictureContainer")&&(l=$("input[type=file]",t),r=l[0].id),n==null?t.removeClass("error"):t.addClass("error"),!t.hasClass("svyDate drop")||((EndsWith(r,"_day")||EndsWith(r,"_month")||EndsWith(r,"_year"))&&(r=r.substr(0,r.lastIndexOf("_"))),n!=null||!($("#"+r+"_day").hasClass("error")||$("#"+r+"_month").hasClass("error")||$("#"+r+"_year").hasClass("error"))))&&(t.hasClass("svyAttachmentHidden")&&(r=r.replace("attachmentFileName_",""),t=t.parents(".svyAttachmentCntr")),i=$("#validation_"+r.replace("validation_","").replace("file_","")),i.length==0&&t[0].name&&(i=$("#validation_"+t[0].name)),i.length!=0))if(n==null)i.fadeOut(500).children().fadeOut(500),savvyValidateUseLineByLineErrors;else{if(savvyValidateUseLineByLineErrors&&(window.SavvyValidateTranslator&&(n=window.SavvyValidateTranslator(n)),e="",i.text()!=""&&i.find(".validation_autotext").length===0?n=i.text():e=" validation_autotext",window.savvyValidateUseOldClassNames?i.html('<span class="outer"><span class="inner'+e+'">'+n+"<\/span><\/span>"):i.html('<span class="validation_outer"><span class="validation_inner'+e+'">'+n+"<\/span><\/span>"),i.hasClass("autoPosition"))){o=t.offset().top-20;f=t.offset().left;t.attr("type")=="checkbox"||t.attr("type")=="radio"?f+=40:t.hasClass("svyPictureContainer")&&!t.hasClass("svyMobilePictureContainer")?(c=t.find(".svyPasteLink:visible").length,u="",c<=4&&(u=t.find(".svyPasteLink:visible:last")),c>4&&(u=t.find(".svyPasteLink:visible:eq(3)")),u.length>0&&(f=u.offset().left+u.outerWidth()-10)):t.hasClass("svyMobilePictureContainer")?(u=t.find(".btn-mobile-takepicture:visible:last"),u.length>0&&(f=u.offset().left+u.outerWidth()+25,o=t.offset().top-20)):f+=t.outerWidth()-40;i.stop().animate({opacity:"100"});i.offset({top:o,left:f});s=$(i).find(".validation_outer");s.length==0&&(s=$(i).find(".outer"));var v=s.width(),y=i.offset().left+v,a=y-$(window).width();a>0&&i.offset({top:o,left:f-a-20});savvyValidateFadeOut&&(t[0].savvyValidationTimeout&&window.clearTimeout(t[0].savvyValidationTimeout),t[0].savvyValidationTimeout=window.setTimeout(function(){i.fadeOut(2e3).children().fadeOut(2e3)},4e3+2e3*Math.random()))}i.show();t.hasClass("date")||t.focus&&!window.isMobile&&t.focus()}}function EndsWith(n,t){return n.indexOf(t,n.length-t.length)!==-1}function CheckBasicFieldDigitsOnlyValidation(n){var t=$(n).val(),i=$(n).attr("minlength")||0;return t==null||t==""||t.length<i||isNaN(t)?(ShowValidationMessage("Field should contain digits only",n),!1):!0}function CheckBasicFieldPhoneNumberValidation(n){var t=$(n).val();return(t=t.replace(/\s+/g,""),t=t.replace(/\-/g,"").replace(/\(/,"").replace(/\)/g,""),t.length<6||isNaN(t))?(ShowValidationMessage("Phone number is invalid",n),!1):!0}function CheckBasicFieldNumberValidation(n){var t=!0,f=$(n).val(),u=df_GetNumberFieldValue(n),i=$(n).attr("min"),r=$(n).attr("max");return i+""!=""&&u<i&&(ShowValidationMessage("Amount must be greater than or equal to "+i,n),t=!1),r+""!=""&&u>r&&(ShowValidationMessage("Amount must be less than or equal to "+r,n),t=!1),t}function CheckBasicFieldEmailValidation(n){var i=!0,t=$(n).val();return t==""||validateEmail(t)?window.savvyValidateVerifyEmails&&$.getJSON("http://twitch.beweb.co.nz/emailvalidator",{email:t},function(t){t.passesValidation||ShowValidationMessage("Email address does not exist",n)}):(ShowValidationMessage("Email address is invalid",n),i=!1),i}function CheckBasicFieldAlphanumValidation(n){for(var r,i=$(n).val(),t=0;t<i.length;t++)if(r=i[t],"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(r)==-1)return ShowValidationMessage("May contain letters and digits only",n),!1;return!0}function CheckBasicFieldUrlComponentValidation(n){for(var r,i=$(n).val(),t=0;t<i.length;t++)if(r=i[t],"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-".indexOf(r)==-1)return ShowValidationMessage("May contain letters, digits and dashes only",n),!1;return!0}function CheckBasicFieldDateValidation(n){var t=$(n).val();return CheckDateField(n,!1)?!0:(ShowValidationMessage("Please enter a valid date",n),!1)}function AddClassValidator(n,t,i){savvyValidateClassRules[n]={cssClassName:n,validationFunc:t,errorMessage:i}}function AddEqualToValidator(n,t){$(n).addClass("confirmationfield").data("originalFieldSelector",t);RevalidateRelatedSelector(t,n)}function RevalidateRelatedSelector(n,t){$(n).data("revalidateRelatedSelector",t)}function CheckFieldClassValidation(n){var t,i,r;for(t in savvyValidateClassRules)if($(n).hasClass(t)&&(i=savvyValidateClassRules[t],r=i.validationFunc($(n).val(),n),!r))return ShowValidationMessage(i.errorMessage,n),!1;return!0}function CheckFieldEqualToValidation(n){if($(n).hasClass("confirmationfield")){var t=$(n).data("originalFieldSelector"),i=$(n).val()==$(t).val();if($(t).val()!=""&&$(n).val()!=""&&!i)return ShowValidationMessage("Please enter the same again",n),!1}return!0}function hasPicturePasteSrc(n){return $("#svyFiledragLive_"+n+" img").length>0?$(".svyFiledragLive_"+n+" img"):!1}function hasPictureSrc(n){return $("#shp_"+n+" img").length>0}function hasPictureFile(n){return $("#file_"+n).val().replace(/C:\\fakepath\\/i,"")}function CheckBasicFieldPictureRequired(n){var t=n.name;return hasPictureSrc(t)||hasPicturePasteSrc(t)||hasPictureFile(t)}function CheckBasicFieldValidation(n){var i=!0,t,u,o,f,e,r,s;if($("div.validation-summary-errors").hide(),$(n).hasClass("svyPictureContainer")&&(n=$("input[type=file]",n)[0]),$(n).hasClass("svyAttachmentCntr")&&$(n).hasClass("required"))if($(n).find(".svyAttachmentHidden").length>0)$(n).find(".svyAttachmentAjax").removeClass("required"),n=$(n).find(".svyAttachmentHidden");else return i;return(t=$(n),t.length>0&&(n=t[0]),t.removeClass("error"),t.parent().find(".errorArrow").remove(),u=t.val(),n.type=="radio"&&(o=t[0].name,o||alert("Radio with no name"),f=t[0].form[o],u=df_GetRadioValue(f),e=f[f.length-1],e&&n!==e))?CheckBasicFieldValidation(e):(r=u==""||u==t.attr("data-placeholder")||u==t.attr("placeholder"),s=t.parent().hasClass("borderError"),n.type=="checkbox"&&t.hasClass("required")?r=!n.checked:t.hasClass("svyPicBrowseFile")&&t.hasClass("required")&&(r=!CheckBasicFieldPictureRequired(n)),r&&t.hasClass("required")&&!t.hasClass("svyAttachmentHidden")?(t.hasClass("svyPicBrowseFile")?ShowValidationMessage("Please upload an image",n):$(n)[0].name.indexOf("__")==-1?ShowValidationMessage("Please complete this field",n):ShowValidationMessage("Required",n),i=!1):CheckFieldEqualToValidation(n)?r&&!t.hasClass("required")?ShowValidationMessage(null,n):t.hasClass("email")&&!CheckBasicFieldEmailValidation(n)?i=!1:t.hasClass("digitsonly")&&!CheckBasicFieldDigitsOnlyValidation(n)?i=!1:t.hasClass("phonenumber")&&!CheckBasicFieldPhoneNumberValidation(n)?i=!1:t.hasClass("postcode")&&!CheckBasicFieldDigitsOnlyValidation(n)?i=!1:t.hasClass("number")&&!CheckBasicFieldNumberValidation(n)?i=!1:t.hasClass("alphanum")&&!CheckBasicFieldAlphanumValidation(n)?i=!1:t.hasClass("urlcomponent")&&!CheckBasicFieldUrlComponentValidation(n)?i=!1:(t.hasClass("date")||t.hasClass("datetime"))&&!CheckBasicFieldDateValidation(n)?i=!1:CheckFieldClassValidation(n)?ShowValidationMessage(null,n):i=!1:i=!1,r&&t.hasClass("svyAttachmentHidden")&&(i=!1,ShowValidationMessage("Please upload a file",n)),t.data("revalidateRelatedSelector")&&CheckBasicFieldValidation(t.data("revalidateRelatedSelector")),$(".svySelect2").each(function(){select2PostitionReset($(this).attr("id"))}),i)}function select2PostitionReset(n){if(n.toLowerCase().search("s2id_")!=-1){n=n.substr(5);var t=$("#s2id_"+n).position(),i=$("#s2id_"+n).outerWidth(),r=t.left+i-40,u=t.top-20;$("#validation_"+n).css("left",r+"px").css("top",u+"px")}}function CheckBasicFormValidation(n){var t,r,i;return $("form",n).length>0?(alert("There is already another form inside this form. You cant nest forms."),!1):(t=!0,r=0,$(n).find(".validation").hide(),$("div.validation-summary-errors").hide(),$(n).find(".error").removeClass("error"),$(n).find(".errorArrow").remove(),$("input:visible,select:visible,textarea:visible,radio:visible,.svyPictureContainer:visible,.svyAttachmentCntr:visible",n).each(function(){$(this).hasClass("cancel")||$(this).hasClass("dontvalidate")||$(this).hasClass("ignore")||$(this).hasClass("svyAttachmentAjax")||CheckBasicFieldValidation(this)||(t=!1,r++,svyFormErrorCount=r)}),n&&(t?$(".validation-feedback",n).fadeOut(500):$(".validation-feedback",n).fadeIn(500)),i=$(n).find("input.error:first"),i.focus&&(i.hasClass("date")||i.focus()),t)}function ShowValidationFeedback(n){var t=$(".error",n).length>0;t?$(".validation-feedback",n).fadeIn(500):$(".validation-feedback",n).fadeOut(500)}function EmailIsValid(n){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(n)}function validateEmail(n){return n.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}var savvyDisableValidate,savvyValidateFadeOut,savvyValidateUseLineByLineErrors,savvyValidateClassRules;$(document).ready(function(){$("form.AutoValidate").each(function(){BewebInitForm(this)})});savvyDisableValidate=!1;savvyValidateFadeOut=!0;savvyValidateUseLineByLineErrors=!0;savvyValidateClassRules={};window.df_GetRadioValue||(window.df_GetRadioValue=function(n){var i="",t;if(n.length||(n=n.form[n.name]),n.length){for(t=0;t<n.length;t++)if(n[t].checked){i=n[t].value;break}}else i=n.checked?n.value:"";return i});svyFormErrorCount=0;
/*
//# sourceMappingURL=Savvy.validate.min.js.map
*/